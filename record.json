{
  "project_context": {
    "brief": "构建一个基于 Rutgers SOC 公开数据的选课查询与空位提醒网站，在“浏览/筛选课程 + 订阅空位提醒”场景下替代 CSP 和 WebReg 的日常使用体验，同时保持低运营成本与开源可一键部署能力。",
    "mvp_goal": "在静态托管的网站上，实现针对单一学期 + 校区的课程浏览、多维筛选、邮箱/Discord 空位提醒闭环，以及基础多语言支持，并提供可在 GitHub 快速自托管的完整方案。",
    "non_goals": [
      "不接入 WebReg 或任何需要登录的系统页面，不在本项目中执行自动选课/退课操作。",
      "不实现完整的学位规划、毕业审核或复杂先修关系校验，仅在 UI 展示先修与核心课程标签。",
      "不处理除邮箱地址与 Discord 标识之外的用户敏感信息，也不构建账号/登录体系。",
      "不承担对 Rutgers 官方课程与容量信息的权威解释责任，数据以官方 SOC 为准。",
      "MVP 不支持短信等额外通知渠道，仅聚焦邮箱和 Discord。",
      "MVP 不强求覆盖全部校区与研究生课程，具体范围后续确认。"
    ]
  },
  "md_source": "2025-11-11-dr.md",
  "generated_at": "2025-11-13T00:00:00Z",
  "tasks": {
    "T-20251113-act-001-soc-json-scraper": {
      "seed_id": "ACT-001",
      "title": "封装 Rutgers SOC 数据抓取与静态 JSON 生成脚本",
      "type": "coding",
      "summary": "基于决策 D-20251113-data-source-soc，从 Rutgers SOC 公开接口（courses.json / openSections）按学期与校区批量抓取课程与 Section，生成静态 JSON，为前端筛选与通知服务提供统一数据源，并验证当前学期 API 可用性与字段覆盖范围。",
      "acceptance_draft": [
        "脚本支持以 term + campus 为输入，批量调用 SOC API 抓取对应组合下全部课程与 Section，并在失败时重试或打印清晰错误日志。",
        "生成的 JSON 字段覆盖 FR-01/FR-02 中列出的关键字段（课程标题、代码、学分、院系、Index、Section、时间地点、核心代码、先修、授课模式等）。",
        "对至少一个真实学期（如 2025 Fall NB）完成抓取，随机抽样 ≥10 门课与官方 SOC 页面比对，课程数量与字段值一致。"
      ],
      "lane": "now",
      "priority_suggested": "P0",
      "status": "todo",
      "dependencies": [],
      "blocked": true,
      "blocked_by": [
        {
          "dep_id": "DEP-001",
          "name": "Rutgers SOC API（courses.json / openSections）",
          "type": "api",
          "status": "unknown",
          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
          "note": "接口无正式公开文档，速率限制与长期稳定性未知；结构或访问策略变更将直接影响数据抓取与通知准确性。"
        }
      ],
      "unblock_plan": "优先完成对 SOC API 的实测（见 T-20251113-soc-api-validation），确认稳定参数与速率限制后再固定脚本实现，并为结构变更预留版本检测与回滚路径。",
      "estimate_h": 6,
      "risk": "high",
      "confidence": 0.7,
      "interfaces_touched": ["data-source", "build-script"],
      "artifacts": [
        "scripts/fetch_soc_data.ts",
        "data/<term>-<campus>.json"
      ],
      "citations": [
        "EVID-001",
        "EVID-002",
        "R-20251113-soc-api-change",
        "#md-4-1-fr-01"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "seed:ACT-001",
        "backend",
        "soc-api",
        "data-pipeline"
      ]
    },
    "T-20251113-act-002-frontend-filter-mvp": {
      "seed_id": "ACT-002",
      "title": "实现基于静态 JSON 的课程列表与多维筛选（MVP）",
      "type": "coding",
      "summary": "在静态前端中加载 ACT-001 生成的课程 JSON，在浏览器端实现课程列表展示与多维组合筛选（课程名、代码、学分、院系、核心代码、先修、时间地点、授课模式等），并提供基础周视图/时间过滤，以满足 FR-01/FR-02/FR-03 的功能与性能目标。",
      "acceptance_draft": [
        "用户在选择学期 + 校区后，可看到完整课程与 Section 列表，字段与 SOC 页面一致，随机抽样 ≥10 门课核对无缺失。",
        "前端支持对标题/代码关键字、学分、院系、是否有先修/核心要求、核心代码、Index/Section、教师、状态、上课星期与时间区间、校区/教学楼/教室、授课模式等字段的单条件与多条件组合筛选。",
        "在约 1000 条记录下，常见筛选/排序交互在浏览器端完成，响应时间 < 0.5 秒；提供按星期 + 起始时间过滤课程的简单周视图，列表与视图结果一致。"
      ],
      "lane": "now",
      "priority_suggested": "P0",
      "status": "todo",
      "dependencies": [
        "T-20251113-act-001-soc-json-scraper"
      ],
      "blocked": false,
      "blocked_by": [],
      "unblock_plan": "",
      "estimate_h": 8,
      "risk": "mid",
      "confidence": 0.7,
      "interfaces_touched": [
        "frontend",
        "filter-logic",
        "calendar-view"
      ],
      "artifacts": [
        "src/pages/courses.tsx",
        "src/components/filters/*",
        "src/components/calendar-view/*"
      ],
      "citations": [
        "EVID-001",
        "EVID-002",
        "EVID-006",
        "R-20251113-frontend-perf",
        "D-20251113-arch-static-frontend-b"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "seed:ACT-002",
        "frontend",
        "filter",
        "mvp"
      ]
    },
    "T-20251113-act-003-mail-notify-function": {
      "seed_id": "ACT-003",
      "title": "设计并上线基于 SOC openSections 的邮件通知云函数",
      "type": "coding",
      "summary": "根据 D-20251113-arch-static-frontend-b 与 D-20251113-notify-channels-email-discord，使用无服务器云函数轮询 SOC openSections，监控用户订阅的 Section 从 Closed 到 Open 的变化，并通过邮件发送包含课程关键信息的提醒，满足 FR-04/FR-05/FR-06 与 NFR-02 中的延迟与可靠性要求。",
      "acceptance_draft": [
        "在测试环境模拟 Closed → Open 场景时，记录从状态变化到收到邮件的时间，平均延迟 < 30 秒，最大延迟 < 60 秒，且同一开放事件同一邮箱只收到 1 封邮件。",
        "邮件正文包含课程名称、Index、Section、上课时间地点等关键信息，并提供安全的退订/管理链接；退订后同一订阅不再收到后续通知。",
        "云函数对 SOC API 与邮件服务调用失败具备重试与日志记录机制，错误不会静默丢失。"
      ],
      "lane": "now",
      "priority_suggested": "P0",
      "status": "todo",
      "dependencies": [
        "T-20251113-act-001-soc-json-scraper"
      ],
      "blocked": true,
      "blocked_by": [
        {
          "dep_id": "DEP-001",
          "name": "Rutgers SOC API（courses.json / openSections）",
          "type": "api",
          "status": "unknown",
          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
          "note": "接口无正式公开文档，速率限制与长期稳定性未知；若访问策略收紧，将影响通知准确性。"
        },
        {
          "dep_id": "DEP-002",
          "name": "SendGrid 或同类邮件发送服务",
          "type": "api",
          "status": "approved",
          "doc_url": "",
          "note": "免费额度有限且需要正确配置发件域名与内容策略，以降低被判为垃圾邮件的风险。"
        }
      ],
      "unblock_plan": "在 T-20251113-soc-api-validation 中摸清 SOC API 行为；基于免费额度设计轮询频率与批量聚合策略，并在配置层支持更换邮件服务商。",
      "estimate_h": 8,
      "risk": "high",
      "confidence": 0.65,
      "interfaces_touched": [
        "cloud-functions",
        "notification-service",
        "email-provider"
      ],
      "artifacts": [
        "functions/notify_email.ts",
        "schemas/subscription.json"
      ],
      "citations": [
        "EVID-001",
        "EVID-003",
        "EVID-005",
        "R-20251113-notify-delay",
        "R-20251113-spam"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "seed:ACT-003",
        "backend",
        "email",
        "notification"
      ]
    },
    "T-20251113-act-004-discord-notify-channel": {
      "seed_id": "ACT-004",
      "title": "实现 Discord 通知通道并评估私信与频道策略",
      "type": "coding",
      "summary": "在通知管道中新增 Discord Bot 通道，支持向用户或频道发送课程开放提醒，并结合 Q-04 评估“私信 vs 频道广播”的可行性、噪音与速率限制表现，为正式默认策略提供依据。",
      "acceptance_draft": [
        "在测试服务器中，Bot 能根据订阅记录成功向指定用户或频道发送包含课程名、Index 与时间地点的提醒消息。",
        "实现对 Discord API 速率限制的节流与重试逻辑，高频触发时仍保持稳定，不出现长期封禁或严重错误。",
        "文档中记录不同通知模式（私信/频道）的优缺点与推荐默认值，并与产品负责人达成一致。"
      ],
      "lane": "next",
      "priority_suggested": "P1",
      "status": "todo",
      "dependencies": [
        "T-20251113-act-001-soc-json-scraper",
        "T-20251113-act-003-mail-notify-function"
      ],
      "blocked": true,
      "blocked_by": [
        {
          "dep_id": "DEP-001",
          "name": "Rutgers SOC API（courses.json / openSections）",
          "type": "api",
          "status": "unknown",
          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
          "note": "接口结构与速率限制的不确定性会影响 Discord 通知的触发准确性。"
        },
        {
          "dep_id": "DEP-003",
          "name": "Discord Bot API",
          "type": "api",
          "status": "approved",
          "doc_url": "",
          "note": "受速率限制和内容政策约束，过于频繁或模板化的消息可能被限流或封禁。"
        }
      ],
      "unblock_plan": "阅读 Discord Bot API 最新文档并在测试服务器进行小规模实验，确定安全的速率与消息格式；结合 Q-04 的业务决策选择默认模式。",
      "estimate_h": 6,
      "risk": "mid",
      "confidence": 0.6,
      "interfaces_touched": [
        "cloud-functions",
        "notification-service",
        "discord-bot"
      ],
      "artifacts": [
        "functions/notify_discord.ts",
        "config/discord.json"
      ],
      "citations": [
        "EVID-001",
        "EVID-004",
        "R-20251113-notify-delay",
        "R-20251113-spam"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "seed:ACT-004",
        "backend",
        "discord",
        "notification"
      ]
    },
    "T-20251113-act-005-frontend-i18n-setup": {
      "seed_id": "ACT-005",
      "title": "搭建前端 i18n 架构并完成中英文界面",
      "type": "coding",
      "summary": "依据决策 D-20251113-multi-lang-day1，在前端引入标准 i18n 库，将所有静态文案（包括错误提示与表单标签）集中到多语言资源文件中，至少完成中英文版本，并为后续小语种支持预留扩展空间。",
      "acceptance_draft": [
        "所有界面文案均通过 i18n 资源文件管理，不再直接硬编码在组件中。",
        "用户可在 UI 中切换中/英文，切换后界面无混合语言或乱码，课程数据本身保留英文但核心代码/字段标签可本地化说明。",
        "构建或 CI 阶段能检测到新增 key 未提供翻译的情况，并给出告警或失败。"
      ],
      "lane": "next",
      "priority_suggested": "P1",
      "status": "todo",
      "dependencies": [
        "T-20251113-act-002-frontend-filter-mvp"
      ],
      "blocked": false,
      "blocked_by": [],
      "unblock_plan": "",
      "estimate_h": 6,
      "risk": "mid",
      "confidence": 0.75,
      "interfaces_touched": [
        "frontend",
        "i18n"
      ],
      "artifacts": [
        "src/i18n/index.ts",
        "locales/en/*.json",
        "locales/zh/*.json"
      ],
      "citations": [
        "EVID-001",
        "EVID-008",
        "R-20251113-i18n-maintenance"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "seed:ACT-005",
        "frontend",
        "i18n",
        "ux"
      ]
    },
    "T-20251113-act-006-deploy-docs-cicd": {
      "seed_id": "ACT-006",
      "title": "编写并验证开源一键部署文档与 CI/CD 流程",
      "type": "docs",
      "summary": "围绕“静态前端 + 云函数通知”架构，整理部署步骤与环境要求，编写 README 与脚本，使外部开发者在不改代码的情况下即可在 GitHub Pages/Netlify 与至少一个云函数平台上完成一键部署，同时配置基础 CI/CD 工作流。",
      "acceptance_draft": [
        "README 提供针对 GitHub Pages/Netlify 的前端部署步骤，以及针对至少一个云函数平台的通知服务部署说明，覆盖环境变量与密钥配置。",
        "仓库包含可直接使用的 CI/CD 配置（如 GitHub Actions），在 push 或合并到主分支时自动构建并部署前端与云函数。",
        "找一名未参与开发的同学，按照文档在全新环境中能在 1 小时内完成部署并成功收到至少一条测试通知。"
      ],
      "lane": "next",
      "priority_suggested": "P1",
      "status": "todo",
      "dependencies": [
        "T-20251113-act-001-soc-json-scraper",
        "T-20251113-act-002-frontend-filter-mvp",
        "T-20251113-act-003-mail-notify-function"
      ],
      "blocked": false,
      "blocked_by": [
        {
          "dep_id": "DEP-004",
          "name": "静态前端托管平台（GitHub Pages / Netlify 等）",
          "type": "tool",
          "status": "approved",
          "doc_url": "",
          "note": "若未来访问量或功能需求超出免费/轻量级平台能力，可能需要迁移到更专业的托管与 CDN。"
        }
      ],
      "unblock_plan": "以纯静态构建产物为目标设计发布流程，确保可以在 GitHub Pages、Netlify 等平台之间平滑迁移；文档中保留至少两种部署路径以降低耦合。",
      "estimate_h": 6,
      "risk": "mid",
      "confidence": 0.7,
      "interfaces_touched": [
        "docs",
        "ci-cd",
        "deployment"
      ],
      "artifacts": [
        "README.md",
        ".github/workflows/deploy.yml"
      ],
      "citations": [
        "EVID-001",
        "EVID-006",
        "EVID-007",
        "R-20251113-oss-governance"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "seed:ACT-006",
        "docs",
        "deployment",
        "ci-cd"
      ]
    },
    "T-20251113-soc-api-validation": {
      "seed_id": null,
      "title": "验证 Rutgers SOC API 参数、限流与字段行为",
      "type": "research",
      "summary": "围绕 C2、R-20251113-soc-api-change 与开放问题 Q-01，对 Rutgers SOC API 的参数组合、拉取全校课程的策略、速率限制与返回字段进行实测，产出可复用的调用指南，降低后续抓取脚本与通知轮询的风险。",
      "acceptance_draft": [
        "整理出获取“单学期 + 校区全部课程”的推荐调用策略（例如按 subject/院系分批），并估算完整抓取一次所需时间。",
        "记录 SOC API 的关键参数与典型响应样例，确认字段覆盖 FR-01/FR-02 所需信息，并标记可能缺失或不稳定的字段。",
        "通过高频调用实验观察速率限制与错误码，给出可接受的最大抓取与轮询频率建议，并形成一份内部说明文档。"
      ],
      "lane": "now",
      "priority_suggested": "P0",
      "status": "todo",
      "dependencies": [],
      "blocked": true,
      "blocked_by": [
        {
          "dep_id": "DEP-001",
          "name": "Rutgers SOC API（courses.json / openSections）",
          "type": "api",
          "status": "unknown",
          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
          "note": "需要在开发前期通过实测确认可用参数、速率限制和结构稳定性。"
        }
      ],
      "unblock_plan": "在测试环境以较低频率尝试多种参数组合，逐步提高频率观察限流行为，将结果记录到 docs/soc_api_notes 中并同步到抓取脚本与通知配置。",
      "estimate_h": 4,
      "risk": "high",
      "confidence": 0.65,
      "interfaces_touched": [
        "data-source",
        "observability"
      ],
      "artifacts": [
        "docs/soc_api_notes.md"
      ],
      "citations": [
        "EVID-001",
        "EVID-002",
        "R-20251113-soc-api-change",
        "Q-01"
      ],
      "created_at": "2025-11-13T00:00:00Z",
      "updated_at": "2025-11-13T00:00:00Z",
      "owner": "tbd",
      "tags": [
        "research",
        "soc-api"
      ]
    }
  },
  "questions_for_human": [
    "Q-01：SOC 抓取范围——是否存在官方推荐的一次性抓取全校课程的参数组合（如 subject=ALL），还是必须按院系/subject 逐个请求？如果只能逐个请求，你能接受的完整抓取时长和抓取频率上限是什么？",
    "Q-02：课程基础信息的更新频率——静态课程信息（标题、描述、学分等）每日一次更新是否足够，还是需要在选课高峰期临时提高到每小时/每数小时一次？",
    "Q-03：空位订阅策略——当课程在满员/有空位之间频繁切换时，是只在首次开放时发送一次通知并自动删除订阅，还是每次开放都发送，或允许用户在界面中自定义策略？",
    "Q-04：Discord 通知形态——更偏向 Bot 私信（更即时但可能更易触发限流）还是频道广播（噪音更大但更稳），以及是否已有规划好的服务器/频道用于测试与正式使用？",
    "Q-05：周历“框选时间找课”的语义——你更希望框选的是“上课时间完全落在选中时间段内的课程”，还是“与该时间段不冲突的所有可选课程”？该功能期望在 MVP、v1.1 还是 v2.0 交付？",
    "Q-06：校区与课程层次范围——MVP 阶段是否只支持 New Brunswick 本科课程？是否需要同时覆盖 Newark/Camden 或研究生课程（level=GR），以便提前规划数据抓取与 UI 维度？"
  ],
  "assumptions": [
    "假设 Rutgers SOC 公开接口在 2025–2026 学年仍保持可匿名访问，且字段结构与调研时基本一致。",
    "假设 MVP 阶段的主要用户为 New Brunswick 本科生，其他校区和研究生课程可以在后续迭代中扩展。",
    "假设目标用户可以接受通过邮箱或 Discord 接收课程空位通知，不强依赖短信等其他通知渠道。",
    "假设无需用户登录即可通过带签名的退订链接完成订阅管理，用户能够理解并接受这种轻量级身份验证方式。"
  ],
  "risks": [
    {
      "id": "R-20251113-soc-api-change",
      "summary": "Rutgers SOC API 结构或访问策略变更、速率限制收紧，导致课程数据抓取失败或不完整。",
      "severity": "high",
      "mitigation": "封装独立的数据访问层，增加结构版本检测与失败重试；对调用错误设置监控与告警；预备基于 HTML 页面解析的备选抓取方式，并控制抓取频率以避免触发限流。",
      "citations": [
        "EVID-001",
        "EVID-002"
      ]
    },
    {
      "id": "R-20251113-notify-delay",
      "summary": "课程状态变化与用户收到通知之间的延迟过长，或出现漏报/重复通知，削弱“狙击空位”的价值。",
      "severity": "high",
      "mitigation": "合理设置轮询周期（例如 30–60 秒），优先使用 openSections 等批量接口；在通知管道中实现幂等处理；为关键任务配置心跳与告警，并通过长期测试收集延迟分布与失败率。",
      "citations": [
        "EVID-001",
        "EVID-003",
        "EVID-005"
      ]
    },
    {
      "id": "R-20251113-frontend-perf",
      "summary": "在低端设备或数据量增大时，前端渲染与筛选性能不足，导致明显卡顿或响应超时。",
      "severity": "mid",
      "mitigation": "使用虚拟列表、分页与延迟渲染减少 DOM 压力；优化筛选算法（尽量 O(n) 扫描、必要时排序）；必要时引入 Web Worker 或 WASM，并通过性能脚本持续监控。",
      "citations": [
        "EVID-001",
        "EVID-006"
      ]
    },
    {
      "id": "R-20251113-spam",
      "summary": "邮件或 Discord 消息被用户或平台判定为垃圾信息，导致送达率下降甚至账号/应用被封禁。",
      "severity": "mid",
      "mitigation": "使用成熟邮件服务并正确配置发件域名；控制通知频率与内容个性化；在邮件中提供清晰退订入口与订阅说明；为 Discord Bot 设置速率限制与重试策略，必要时采用频道摘要替代大量私信。",
      "citations": [
        "EVID-001",
        "EVID-003",
        "EVID-004",
        "EVID-005"
      ]
    },
    {
      "id": "R-20251113-i18n-maintenance",
      "summary": "多语言内容维护滞后，新功能上线时部分语言缺失翻译或内容不一致，影响非英文用户体验。",
      "severity": "mid",
      "mitigation": "所有界面文案统一走 i18n 资源文件；在 CI 中加入缺失翻译检查；对未翻译 key 统一回退英文并标记 TODO，定期清理。",
      "citations": [
        "EVID-001",
        "EVID-008"
      ]
    },
    {
      "id": "R-20251113-oss-governance",
      "summary": "开源仓库缺乏持续维护，Issue/PR 堆积或依赖安全漏洞得不到修复，削弱社区信任。",
      "severity": "mid",
      "mitigation": "制定贡献指南与代码规范；配置依赖安全扫描与自动升级工具；鼓励社区维护者参与协作，并在 README 中明确官方维护范围与责任边界。",
      "citations": [
        "EVID-001"
      ]
    }
  ],
  "external_dependencies": [
    {
      "dep_id": "DEP-001",
      "name": "Rutgers SOC API（courses.json / openSections）",
      "type": "api",
      "status": "unknown",
      "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
      "note": "接口无正式公开文档，速率限制与长期稳定性未知；任何结构或访问策略变更都会影响数据抓取与通知准确性。"
    },
    {
      "dep_id": "DEP-002",
      "name": "SendGrid 或同类邮件发送服务",
      "type": "api",
      "status": "approved",
      "doc_url": "",
      "note": "免费额度有限，若用户规模增长可能超限；需要正确配置发件域名与发送策略以降低被判为垃圾邮件的风险。"
    },
    {
      "dep_id": "DEP-003",
      "name": "Discord Bot API",
      "type": "api",
      "status": "approved",
      "doc_url": "",
      "note": "受速率限制和内容政策约束，过于频繁或模板化的消息可能被限流或封禁。"
    },
    {
      "dep_id": "DEP-004",
      "name": "静态前端托管平台（GitHub Pages / Netlify 等）",
      "type": "tool",
      "status": "approved",
      "doc_url": "",
      "note": "若未来访问量或功能需求超出免费/轻量级平台能力，可能需要迁移到更专业的托管与 CDN。"
    }
  ],
  "facts": [
    "本 JSON 基于 2025-11-11-dr 研究结论整理，数据源为 Rutgers SOC 与相关开源/社区资料。:contentReference[oaicite:0]{index=0}",
    "项目目标是在“浏览筛选课程 + 订阅空位提醒”场景下替代 CSP 和 WebReg 的日常使用体验，而不是替代官方 WebReg 的选课注册流程。",
    "系统统一使用 Rutgers SOC 公开接口（courses.json、openSections 等）作为课程与容量数据来源，不抓取需要登录的 WebReg 页面。",
    "架构采用静态前端 + 云函数通知，前端在浏览器内完成主要筛选逻辑，后端仅负责数据抓取与通知，从而在控制成本的同时支撑高并发访问。",
    "通知渠道 MVP 聚焦邮箱和 Discord，并通过显式退订/管理入口满足隐私与反垃圾邮件规范。",
    "项目从 day-1 起按多语言架构设计，至少支持中英文 UI，并通过 i18n 资源文件管理文案以方便后续扩展其他语言。"
  ],
  "decisions": [
    {
      "id": "D-20251113-arch-static-frontend-b",
      "summary": "v1.x 阶段采用“静态前端 + 云函数/定时任务通知”的方案 B，而不是自建长期运行数据库后端或深度改造现有排课项目。",
      "rationale": "静态前端可托管在 GitHub Pages/Netlify 等平台，结合云函数按量计费，既满足高并发浏览和低延迟筛选，又能显著降低长期运维成本，符合“低运营成本、无登录、注重 UI 体验”的目标。",
      "citations": [
        "EVID-001",
        "EVID-006",
        "EVID-007"
      ],
      "date": "2025-11-13T00:00:00Z"
    },
    {
      "id": "D-20251113-data-source-soc",
      "summary": "课程与空位数据统一使用 Rutgers SOC 公开接口（courses.json / openSections 等），禁止抓取 WebReg 或需要登录的页面。",
      "rationale": "SOC 提供官方公开的课程与容量数据，是合法且稳定的主要来源；避免抓取需要登录的 WebReg 页面，可以减少合规和技术风险。",
      "citations": [
        "EVID-001",
        "EVID-002"
      ],
      "date": "2025-11-13T00:00:00Z"
    },
    {
      "id": "D-20251113-client-side-filter",
      "summary": "课程筛选和排序逻辑尽可能全部在浏览器端完成，后端仅负责数据抓取与通知，不提供复杂查询 API。",
      "rationale": "在典型课程数量规模下，本地筛选可在毫秒级完成，避免后端查询瓶颈；同时简化服务器架构、提升扩展性并降低成本。",
      "citations": [
        "EVID-001",
        "EVID-006"
      ],
      "date": "2025-11-13T00:00:00Z"
    },
    {
      "id": "D-20251113-notify-channels-email-discord",
      "summary": "通知渠道优先支持邮箱和 Discord，短信等其他渠道暂不在 MVP 范围内。",
      "rationale": "邮件和 Discord 在 Rutgers 学生群体中使用广泛、成本可控且生态成熟；短信成本高且合规复杂，因此在满足 MVP 的前提下优先实现邮箱与 Discord。",
      "citations": [
        "EVID-001",
        "EVID-003",
        "EVID-004",
        "EVID-005"
      ],
      "date": "2025-11-13T00:00:00Z"
    },
    {
      "id": "D-20251113-multi-lang-day1",
      "summary": "项目从 day-1 起按多语言架构设计，至少支持中英文 UI，通过标准 i18n 库管理所有文案。",
      "rationale": "多语言需求在项目初期已被明确，及早引入 i18n 能避免后续大规模重构，同时方便支持小语种学生群体。",
      "citations": [
        "EVID-001",
        "EVID-008"
      ],
      "date": "2025-11-13T00:00:00Z"
    }
  ]
}
