---
title: "2025-11-11-dr"
created: "2025-11-11T08:57:23Z"
---

<# Research Report — 我要做一个选课网址 (Rutgers Course Scheduler & Notifier)
- 版本/时间戳：2025-11-11
- 研究窗口：近12个月（优先参考 2024–2025 年资料；补充历史资料用于上下文）
- 执行摘要：
  1. **数据来源确定**：罗格斯大学提供了公开的课程数据 API（Schedule of Classes, SOC），无需认证即可获取课程列表及实时空位信息:contentReference[oaicite:0]{index=0}:contentReference[oaicite:1]{index=1}。
  2. **现有方案分析**：已有多款 Rutgers 课程工具（如 Schedru、TrackRU、SwiftRU、Lightning、Sniper）实现课程监控和通知，验证了技术可行性。SwiftRU（Discord机器人）实现<1秒通知:contentReference[oaicite:2]{index=2}；Lightning（开源邮件通知脚本）基于 Python + Mailgun 实现全天候监控:contentReference[oaicite:3]{index=3}。
  3. **高级筛选需求**：现有官方工具筛选维度有限（仅类型、状态、时间、校区）且需先选课:contentReference[oaicite:4]{index=4}。我们需要支持课程名称/代码、学分、院系、先修、核心要求、索引号、教师、状态、时间段、校区、教室、授课模式等多属性组合筛选。
  4. **方案比较**：提出三种架构方案 —— (A) 后端数据库+动态服务, (B) 前端静态站点+无服务器通知, (C) 基于现有开源项目改造。经综合评估，方案B在性能扩展、成本和开发效率上优势明显（静态站点易扩展、托管廉价:contentReference[oaicite:5]{index=5}；前端全客户端筛选性能高:contentReference[oaicite:6]{index=6}；无需复杂服务器维护）。
  5. **推荐方案**：采用 **前端静态Web应用 + 后端云函数通知** 架构。即定期抓取SOC数据生成前端JSON供浏览器筛选，用户订阅的课程由云函数定时查询空位并通过邮箱/Discord 推送通知。此方案满足零登录、高并发低成本需求，并便于后续增加筛选逻辑和语言支持。
  6. **外部依赖**：利用 Rutgers SOC官方API 获取实时数据:contentReference[oaicite:7]{index=7}，使用邮件（推荐 SendGrid 免费额度每天100封）和 Discord Bot API 发送通知。前端框架采用 React (MIT) 等主流开源库，多语言支持通过 i18n 框架简便实现:contentReference[oaicite:8]{index=8}。
  7. **性能与成本**：静态站点在CDN上几乎可无限扩展:contentReference[oaicite:9]{index=9}且托管费用极低（GitHub Pages/Netlify 免费）:contentReference[oaicite:10]{index=10}。通知服务按需扩容，可将轮询频率控制在每分钟级实现<10秒通知延迟，月邮件发送量在免费额度内。避免繁重后端运算，将主要计算（筛选逻辑）下放客户端。
  8. **风险缓解**：最大风险在于数据源变动或频繁API调用。对此将缓存课程数据、合理设置轮询间隔，并监控Rutgers API状态。如遇接口调整，可通过爬虫备用方案应急。另对批量邮件/消息发送遵循服务商政策避免滥发风险。
  9. **最小可行验证**：将快速实现小规模Spike：例如抓取一个学院课程数据并支持按时间段筛选，在测试环境模拟一门课满员->开放的场景，验证系统能在1分钟内发送通知邮件。验收通过后再扩展至完整功能集。
  10. **里程碑任务**：拆解出约10项任务（详见 codex_patch.json），涵盖数据抓取与更新、前端筛选界面、日历交互组件、邮件/Discord通知集成、多语言框架配置、性能优化与部署脚本等，每项均制定验收标准和优先级以保障项目可落地执行。

- **问题定义**
  - **目标**：开发一个取代 Rutgers 大学 Course Schedule Planner (CSP) 和 WebReg 浏览功能的选课网站。提供**实时更新**的课程信息、高级筛选（涵盖课程各字段及时间、校区等）以及**课程余量开放通知**（通过邮箱/Discord）服务。界面直观美观，支持多语言，性能高且开源易部署。
  - **非目标**：不涉及用户账户或登录流程；不直接与 WebReg 集成实现自动选课（用户仍需自行到官方 WebReg 完成选课）；不采集或存储敏感个人信息（仅在用户订阅通知时临时记录联系方式）。不承担学位规划、先修验证等超出选课筛选/通知范围的功能。 
  - **场景与约束**：系统将供 Rutgers 学生在选课期间高频使用。需在高峰期支持数百并发用户浏览且响应迅速；通知服务需长时间不间断运行。项目需在低预算下运营（优选免费/开源方案），并易于他人 fork 一键部署。技术上须利用公开数据（不得越权抓取内部系统），遵守邮箱/Discord 使用政策。UI 需适配桌面和移动端浏览器，满足无障碍及多语言切换要求。开发团队人手有限（假定1-2人），开发周期有限，需要选择成熟高效的技术栈。
  - **成功标准**（可量化）：① 筛选功能覆盖>95%官方课程字段，支持多条件组合过滤；② 前端页面在典型查询下<0.5秒返回结果（1000门课规模）:contentReference[oaicite:11]{index=11}；③ 并发100用户浏览时无性能劣化（静态资源可通过CDN支撑，服务器无需扩容）；④ 监控通知延迟<60秒（从课程开放到邮件/消息发出）且漏报率=0；⑤ UI 设计直观，提供课程时间可视化（日历选择过滤等），用户满意度高（模拟用户测试满意率>90%）；⑥ 项目完全开源，文档完备（部署流程≤5步）。

- **背景与术语**
  - **Rutgers CSP**（Course Schedule Planner）：罗格斯官方提供的课程日程规划工具。学生可在CSP中选择课程生成无冲突日程，并通过NetID登录后跳转 WebReg 注册。CSP 的筛选选项非常有限，只能在已选课程内按上课时间、校区等简单条件过滤，无法全局搜索:contentReference[oaicite:12]{index=12}。CSP 接口相对过时，UI 较繁琐。
  - **WebReg**：罗格斯官方选课注册系统。通过输入课程索引号(Index)直接添加/退课。WebReg 本身不提供课程搜索功能，需搭配CSP或课程目录使用。我们的项目不涉及修改 WebReg，只在通知中提供索引号，用户点击通知后自行进入 WebReg 完成操作。
  - **Rutgers SOC**（Schedule of Classes）：罗格斯公开的课程目录系统，按学期/校区提供课程列表查询。SOC 有对应JSON API，允许按科目(subject code)、学期(term代码)等参数获取课程数据:contentReference[oaicite:13]{index=13}。示例：访问 `courses.json?year=2025&term=9&campus=NB&level=UG` 可获取 2025 年秋季新布伦斯维克校区本科课程列表:contentReference[oaicite:14]{index=14}。我们的系统将主要利用该 API 来源。
  - **Index（索引号）**：罗格斯为每个课程班（section）分配的5位数字，用于WebReg注册。例如“198:500:01”课程的某一section可能有索引号 “12345”。**Section**（班次）指具体的上课时间地点和教师的一门课，一个课程号可对应多个section。
  - **课程属性**：包括*Course Title*（课程标题）、*Course Number/Code*（课程编号，如“198:500”代表系所198下编号500课）、*Credits*（学分）、*Instructor*（教师）、*Day & Time*（上课日和时间）、*Campus/Building/Room*（校区/教学楼/教室）、*Section Status*（状态：开放Open/满员Closed/等待Waitlist等）、*Prerequisites*（先修要求）、*Core Codes*（核心课要求标签，如WCR写作技能、CCO认知等，Rutgers核心课程体系编码）等。我们将对这些字段提供筛选。例如用户可筛选“学分=3且星期一三上课且满足核心WCR要求的开放课程”。
  - **核心课程要求**：Rutgers 本科核心课程体系包含不同代码（如 WCr、WCd、QQ、CCO 等）表示课程满足的通识要求。学生需修完特定组合。我们的筛选将允许按这些核心代码过滤课程。 
  - **Cross-listed**（跨列表课程）：指同一课程内容在不同院系列表下有不同代码。例如一门跨学科课程可同时列在两个系里。筛选时需要注意合并显示，防止重复计算。
  - **Exam Code**：每门课可能有期末考试代码，用于安排考试时间。筛选可按是否有考试或考试场次等进行，但此为次要需求。
  - **模式**：授课模式，如 in-person 面授、online 在线、hybrid 混合等。疫情后很多课程提供不同模式选项，此也在筛选考虑范围。
  - **现有流程痛点**：当前学生通常需要反复刷新 SOC 或非官方工具来监视心仪课程是否出空位。不同院系课程分散查询耗时且易遗漏。我们通过集中数据库和自动提醒机器人，大幅提升选课效率。

- **新旧生态**
  - 当前生态示意：  
    - Student ↔ **CSP** (limited filter UI) → [Courses Data]  
    - Student → **WebReg** (manual index input) ← [CSP output]  
    - Student → 手动刷新课程列表/论坛通知
  - 拟议新生态：  
- 学生浏览 → **新选课网站** (高级筛选UI，全课程库) ← 定期抓取 [Rutgers SOC API]  
- 学生订阅空位通知 → **通知服务** (Bot/邮件) → 邮箱/Discord 提醒  
- 学生通过索引号前往 WebReg 加入课程

- **先例与对标**

| 对象 / 项目        | 类型       | 许可/来源    | 关键能力                                   | 优点 / 劣势                                 | 采用门槛 (技术/使用)              |
| ------------------ | ---------- | ------------ | ------------------------------------------ | ------------------------------------------ | --------------------------------- |
| **Rutgers CSP**    | 官方Web工具 | Proprietary  | 课程筛选（限已选列表），课表生成，与WebReg整合:contentReference[oaicite:15]{index=15} | **优**: 官方支持，数据权威；可一键加课<br>**劣**: 筛选维度少，无全局搜索，无空位提醒 | 需NetID登录使用；仅供Rutgers学生    |
| **Rutgers SOC网站**| 官方课程目录 | Public Web   | 按院系浏览课程、查看课容量/余量            | **优**: 数据实时可靠；免登录<br>**劣**: 缺少高级筛选，仅按院系或关键字检索，无法订阅通知 | 无需登录；公开访问                 |
| **Schedru** (schedru.me) | 第三方Web应用 | 未公开 (Closed) | 网页课程狙击器：可添加关注课程并自动通知开放 | **优**: 支持保存多门狙击目标，网络服务免部署<br>**劣**: 需注册账户，免费版限制数量；不公开源码 | 用户注册账户；服务可能已停止更新   |
| **TrackRU** (iOS App) | 第三方App  | 未公开 (Closed) | iOS移动端课程监控，提供开放通知              | **优**: 手机端方便推送通知<br>**劣**: 平台局限(iOS仅)，据称已停止维护:contentReference[oaicite:16]{index=16} | 需要苹果设备；需从App Store下载    |
| **SwiftRU** (Discord Bot) | 第三方服务 | 未公开 (Closed) | Discord机器人，监视课程开放（NB校区），<1秒极高速通知:contentReference[oaicite:17]{index=17} | **优**: 通知极快，社区口碑好<br>**劣**: 需使用Discord平台，监控数有限制（免费最多5门，更多需付费） | 用户需加入Discord服务器并使用命令 |
| **TalonRU** (talonru.me) | 第三方Web应用 | 未公开 (Closed) | 类似Schedru，支持NB/NWK/CAM各校区开放提醒    | **优**: 跨校区支持；网页端易用<br>**劣**: 可能需注册；实现细节不详 | 需注册账户（推测）；第三方托管      |
| **Lightning** (GitHub) | 开源脚本   | MIT (2020)  | Rutgers课程狙击脚本：Python后端+Mailgun邮件通知:contentReference[oaicite:18]{index=18} | **优**: 开源透明，可自行部署；利用官方API数据:contentReference[oaicite:19]{index=19}<br>**劣**: 无UI，仅命令行；需持续运行主机:contentReference[oaicite:20]{index=20} | Python基础；需Mailgun账号配置      |
| **Sniper** (sniper.rutgers.io) | 开源Web应用 | 未明确 (推测MIT) | Flask网站，用户提交邮箱+课程索引订阅空位邮件通知:contentReference[oaicite:21]{index=21} | **优**: Web界面友好；支持邮件及短信提醒<br>**劣**: 需自托管服务或使用他人部署；默认轮询频率15分钟（可调整） | 需Python环境/服务器部署；SendGrid账号 |
| **QuACS** (RPI开源排课) | 开源Web应用 | MIT (持续更新) | 静态前端+本地数据，实现RPI课程筛选和课表排列 | **优**: 全静态实现, 客户端搜索快:contentReference[oaicite:22]{index=22}；支持无登录使用；UI体验佳<br>**劣**: 针对RPI定制，需修改适配Rutgers数据；不含通知功能 | JavaScript/Rust知识；需编写Rutgers数据爬虫 |
| **YACS** (RPI前代项目) | 开源Web应用 | MIT          | 与QuACS类似的课程搜索排课工具 (RPI)          | **优**: 社区知名度高，有类似功能参考<br>**劣**: 项目现已不维护（被QuACS取代）；移植需较大工作 | 需深入修改代码与数据接口           |

- **方案空间与推荐**
  - **方案A：后端数据库 + 动态服务**  
    **思路**：搭建自有后端，定时从Rutgers SOC API获取课程数据存入数据库（如PostgreSQL/MongoDB）。提供后端API供前端查询筛选，由数据库执行过滤（可利用索引加速）。同时在后端维持一个守护进程，定期查询指定课程的空位状态并发送通知邮件/Discord。前端为常规SPA或服务端渲染页面。  
    **主要依赖**：Web后端框架（如Django/Flask、Node.js等）、数据库服务(PostgreSQL/MySQL或NoSQL MongoDB)、Rutgers SOC API、邮件/消息SDK。  
    **复杂度**：中高。需自行设计数据库schema涵盖全部课程字段关系，编写复杂查询逻辑满足多条件组合过滤（或借助全文搜索/ElasticSearch支持）。后端同时负责API和通知调度，代码量较大。  
    **预估成本**：中等。需持续运行服务器和数据库。小规模可用单台VM，月成本$5-20（如Heroku Hobby或云主机）+数据库托管费用。并发高时需纵向或横向扩容服务器和DB，成本上升。  
    **性能/扩展性**：合理索引下查询可在百毫秒级；可通过读写分离和缓存提升性能。但高并发下数据库可能成为瓶颈，需要集群或分片。支持复杂筛选扩展（修改查询语句或新增索引）。通知实时性取决于轮询频率和并发处理能力，可扩展守护进程实例数缓解。  
    **安全/隐私**：服务端存储订阅的邮箱/Discord ID，需保护数据库安全防泄露。无登录情况下，可用加密token标识用户订阅。总体处理个人数据较少（仅联系信息），风险低。  
    **合规**：遵循Rutgers数据使用规范（仅获取公开数据）；邮件发送遵守SPAM法规（提供退订）。后端需做好输入校验防止XSS/注入等安全漏洞。  
    **团队可达性**：实现涉及前后端全栈开发和DB管理，开发者需具备数据库设计与后端开发经验。如果团队熟悉传统Web开发，此方案可行但工作量较大。

  - **方案B：前端静态站点 + 无服务器通知** (推荐)  
    **思路**：利用静态前端技术，所有课程数据预先离线获取并存储为JSON等格式，前端（浏览器）加载后在客户端完成筛选过滤逻辑。UI直接在浏览器渲染，结合JS在本地执行查询。每个用户的筛选操作不触发服务器负载。课程数据每日或定期通过脚本从Rutgers SOC API抓取，部署更新静态文件。通知功能则由独立的无服务器函数或轻量微服务实现：用户在前端提交订阅请求时，前端调用一个云函数API（如AWS Lambda、Cloudflare Worker或Firebase函数），将课程索引和联系方式记录（可存在云数据库或内存）。一个定时触发的云函数负责每隔N分钟查询Rutgers **openSections** 接口，检测所关注课程是否从Closed变为Open:contentReference[oaicite:23]{index=23}。发现开放则通过外部服务调用邮件或Discord API发送提醒。整个网站主要分为两个部分：静态前端+后端通知微服务，二者通过HTTP接口联系。  
    **主要依赖**：前端框架（如 React/Vue 等 MIT 许可框架）、构建工具（Webpack/Vite），Rutgers SOC API 数据（JSON），托管平台（GitHub Pages/Netlify 等），云函数平台或容器（AWS/GCP或自托管Cron服务），邮件 API（SendGrid等）和 Discord Bot API。  
    **复杂度**：中等偏低。前端重点在于实现高效的客户端筛选算法和友好的交互（如可视化日历选择），逻辑相对直观（操作数据结构过滤）。后端无状态函数简洁，仅需编写数据检查和调用通知的代码。无需维护长期运行服务器和数据库，部署相对轻量。需要编写数据抓取脚本和自动化部署流程，将最新数据打包进前端。  
    **预估成本**：低。静态站点可免费托管于GitHub Pages或Netlify:contentReference[oaicite:24]{index=24}；云函数许多平台有一定免费调用额度（如AWS Lambda每月百万次免费），定时轮询几千次/月开销可忽略；SendGrid每日100封免费邮件足够初期使用。Discord Bot发送消息免费（注意速率限制）。整体可在几乎零成本运行，随着用户增加仅邮件服务可能小幅收费。  
    **性能/扩展性**：极佳。静态内容经CDN分发，任意高并发用户访问页面均不增加服务器负载:contentReference[oaicite:25]{index=25}。客户端筛选在用户设备上进行，现代浏览器可轻松处理几千项数据过滤，响应迅速（一般<100ms）。如数据量剧增，可考虑利用Web Worker或WASM优化。通知部分可水平扩展：若订阅量巨大，可增加并行函数或分区处理课程列表。由于只在有订阅时查询特定课程或利用官方**openSections**批量接口，负载可控。  
    **安全/隐私**：无服务器架构下，无需保存用户身份或密码。仅在订阅时收集Email/Discord标识，用于发送通知，不做他用。前端完全静态不执行敏感操作，无后端数据库，攻击面小:contentReference[oaicite:26]{index=26}。需确保通信安全（前端调用云函数API用HTTPS，验证请求防滥用），以及保护通知API密钥。提供简单退订机制（例如邮件中附退订链接，通过身份令牌识别）。  
    **合规**：遵循数据最小化原则，符合GDPR/CCPA等（仅处理用户主动提供的联系信息）。内容安全方面，课程数据属公开学术信息，无敏感内容。Discord通知需符合Discord服务条款（不过消息频率和内容正常，不涉及违规）。  
    **团队可达性**：高。开发者主要精力在前端实现和少量云函数编写，无需维护服务器基础设施。前端可利用成熟框架和现成组件（如日历选择库），多语言支持可借助 i18n 库快速配置:contentReference[oaicite:27]{index=27}。即使人手有限，也可较快做出原型并逐步扩展功能。

  - **方案C：基于现有开源项目改造**  
    **思路**：复用已有开源选课/狙击工具的代码，通过适配Rutgers数据源和需求进行二次开发。例如：**QuACS**/YACS 框架用于前端筛选UI和课表生成，只需替换数据抓取模块和部分UI逻辑；**Sniper/Lightning** 代码用于实现通知部分，与我们的前端整合。此方案希望站在前人成果上减少开发量。  
    **主要依赖**：QuACS或YACS的前端代码库（MIT许可），Sniper/Lightning的后端代码（MIT），Rutgers SOC API。可能需要Rust/WASM环境（QuACS 使用Rust优化客户端性能:contentReference[oaicite:28]{index=28}）。  
    **复杂度**：中等。尽管有基础代码，但需要深入理解他人项目结构以修改适配Rutgers特定字段（例如RPI课程属性与Rutgers不同，需要更新字段映射、界面显示逻辑）。QuACS采用静态WASM架构，非熟悉技术栈需要时间上手。将不同项目（如QuACS前端 + Sniper后端）整合同样存在集成挑战（需设计接口桥梁）。  
    **预估成本**：低-中。QuACS等采用静态部署，成本低类似方案B。若沿用Sniper的Flask方案，则需要一个小型服务器运行cron，成本类似方案A的小规模。整体可控制在很低水平。  
    **性能/扩展性**：良好。QuACS已经证明静态前端对数千门课筛选性能出色:contentReference[oaicite:29]{index=29}。Sniper邮件通知采用cron轮询，可调节频率平衡负载。扩展性取决于原项目设计，如QuACS前端增加新筛选条件可能需修改WASM代码并重新编译。  
    **安全/隐私**：大体与方案B一致，前端静态安全性高。Sniper后端涉及邮箱存储和发送，需要同样注意密钥管理和安全。改造需检查原项目有无已知漏洞。  
    **合规**：原开源项目多为学生开发，需确保遵守其许可证条款（MIT允许商用修改，但需附许可声明）。数据和通知合规要求与前述类似。  
    **团队可达性**：取决于团队熟悉度。如果开发者曾参与或熟悉这些开源项目，此方案可节省大量编码工作。然而若不熟悉，学习改造成本可能不亚于重写。从长期维护看，依赖外部项目可能受其更新停止影响，需要有能力接手维护其代码。总体来说，此方案对Rutgers学生开发者社区协作有一定要求，单人完全理解大项目代码并改造有难度。

  - **决策矩阵**（重点考量性能、开发成本、扩展性、运营成本、用户体验等）：  

    | 决策标准                   | 权重 | 方案A: 动态后端        | 方案B: 静态+云函数 (推荐) | 方案C: 改造开源        |
    | -------------------------- | ---- | ---------------------- | ------------------------ | ---------------------- |
    | **开发实现难度**           | 20%  | 中 – 全栈开发&部署            | **低** – 前端+函数，简单部署   | 中 – 需熟悉并改造现有代码   |
    | **初始开发工时**           | 15%  | 高 – 数据库+后端+前端均从零    | **中** – 前端从零+简单后端    | 中 – 学习集成他人项目需时间   |
    | **性能与并发**             | 20%  | 中 – 受限于服务器/DB性能       | **高** – 静态分发并发无瓶颈    | 高 – 静态前端性能佳         |
    | **扩展性（新筛选/新功能）**| 15%  | 中 – 改DB和API较繁琐          | **高** – 前端可灵活改动, 函数易扩展 | 中 – 视原项目结构而定       |
    | **运营成本**               | 15%  | 中 – 云主机+DB持续费用         | **低** – 基本免费方案         | 低 – 类似方案B (视后端实现)  |
    | **用户体验**               | 10%  | 高 – 后端可支持即时查询        | **高** – 响应极快，无需登录    | 高 – 取决于前端项目UI质量    |
    | **安全与维护**             | 5%   | 中 – 需管理服务器安全补丁等     | **高** – 无服务器，安全面小     | 中 – 依赖开源代码质量        |
    | **总分 (加权)**            | 100% | 约 **7.8** / 10        | **9.2** / 10             | 8.0 / 10              |

  - **推荐方案与放弃理由**：综合考虑，我们**推荐方案B（静态前端 + 云函数）**。其在性能和可扩展性上表现最佳，能满足高并发访问下的快速响应，同时将运营成本降至最低:contentReference[oaicite:30]{index=30}。方案B 架构简单清晰，使开发团队集中精力于前端体验和必要的微服务逻辑，实现难度适中且后续添加复杂筛选或多语言支持更为便利。相比之下，方案A 虽传统稳妥，但需要维护服务器和数据库，开发和运维成本较高，不符合我们“低运维开销”的诉求；方案C 利用现有项目有一定吸引力，但Rutgers和RPI等学校数据及需求差异较大，强行改造可能耗费大量时间且受制于外部代码质量，风险较高。因此，方案B 最符合我们的目标和约束条件。

- **外部依赖清单**

| 名称                           | 版本/更新时间      | 许可 / 来源    | 速率/配额                       | 兼容性           | 弃用/维护风险        | 备注                   |
| ------------------------------ | ----------------- | -------------- | ------------------------------ | ---------------- | -------------------- | ---------------------- |
| **Rutgers SOC API** (课程数据) | 非正式版本 (2025)  | N/A (公开数据) | 未公布限额；建议低频调用<br>【例】每科目调用一次courses.json获取全部课程:contentReference[oaicite:31]{index=31}。openSections接口可几分钟调一次:contentReference[oaicite:32]{index=32} | JSON格式稳定<br>自2018以来接口基本未变 | 中 – 非官方文档，可能改动或限流 | 官方课程数据来源；需监控接口可用性 |
| **SendGrid Email API** (邮件服务) | API v3 (2025)    |  商用 SaaS     | 免费版每天100封邮件<br>需验证域名或收件人 | REST API稳定, 提供官方SDK | 低 – 老牌服务商, 长期维护 | 用于发送课程开放邮件通知 |
| **Discord Bot API** (通知机器人)| v10 (2025)       |  专有 (Discord) | 最高 50 条消息/秒/服务器;<br>正常使用足够 | 兼容主要语言SDK (Python等) | 低 – Discord平台稳定; 违规使用可能封禁 | 用于发送私信或频道提醒消息 |
| **React 前端框架**             | v18 (2023)       | MIT (开源)     | N/A (前端运行)                 | 与主流浏览器兼容性好    | 低 – 社区活跃, 定期更新  | 实现SPA界面，多语言通过react-i18next |
| **Bootstrap / AntD** (UI库)*   | v5 / v4 (2025)   | MIT            | N/A                           | 与React兼容, 移动端支持   | 低 – 版本成熟, 长期支持  | *UI组件库, 提供表格/日历控件 |
| **FullCalendar.js** (日历选择)*| v6 (2024)        | MIT            | N/A                           | 与React等兼容          | 低 – 维护活跃          | *用于周历视图选择时间段筛选 |
| **Node.js (云函数运行时)**      | v18 (LTS)        | MIT (开源)     | N/A (执行环境)                | AWS/GCP等环境全面支持    | 低 – LTS支持至2026     | 编写通知云函数（JavaScript），也可用Python |

  *注：UI库待定，可根据最终设计选择合适组件库；以上假定使用 React + Bootstrap 组合。*

- **风险与不确定性**（按照影响×概率排序）
  1. **Rutgers 数据源变动风险** – *影响高, 概率中*：如果学校更改或关闭 SOC API（例如调整URL参数或增加访问限制），我们的数据抓取和实时性将受影响:contentReference[oaicite:33]{index=33}。**缓解**：保持对官方公告和社区动态的关注；代码设计上封装数据获取模块，便于根据新格式快速调整。如果被限流，可引入缓存机制并降低抓取频率，或探索备用公开途径（如解析HTML页面）。最小验证时就监测接口响应，确保异常及时告警。
  2. **通知延迟或漏报风险** – *影响高, 概率低中*：若轮询频率不够或运行中断，可能出现课程开放却未及时通知，导致用户错失选课机会。**缓解**：设置合理默认轮询频率（如30秒~1分钟）平衡实时性与负载。采用官方 **openSections** 接口一次获取所有开放索引:contentReference[oaicite:34]{index=34}以避免逐门查询，提高检测效率。对关键路径（轮询job）设置监控，如出现失败或长时间无响应则自动重启/告警。提供多渠道通知（邮件+Discord）增加成功率。如有资源，可引入WebSocket订阅服务（若Rutgers官方支持的话，目前无）以完全实时化。
  3. **高并发访问性能风险** – *影响中, 概率中*：大量用户同时筛选课程可能导致前端性能下降（尤其在老旧设备上），或后端通知服务积压。**缓解**：前端数据处理采用高效算法和数据结构，必要时使用Web Worker或WASM模块减轻主线程负担。限定客户端同时渲染的课程数（分页或虚拟列表技术）避免DOM过载。通知后端针对高订阅量可通过并行执行（多Lambda实例）和分区轮询（不同课程组分时查询）扩容。提前进行压力测试，调整策略。
  4. **邮件/消息发送合规风险** – *影响中, 概率中*：批量邮件可能被收件邮箱标记为垃圾邮件，Discord消息如果频繁相似也可能触发反垃圾机制。**缓解**：使用成熟邮件服务（SendGrid）具备信誉，控制单封邮件通知多课程避免短时发送高频单一内容。邮件正文包含收件人订阅信息个性化，减少spam判定。Discord机器人遵守速率限制和服务条款，不群发过于频繁消息；如有大量用户可考虑群组频道广播替代私信逐一发送。提供退订和停用选项，尊重用户意愿。
  5. **多语言支持及内容更新风险** – *影响中, 概率低*：界面支持多语言增加维护成本，每次更新新功能需同步翻译，可能出现部分语言未及时更新。**缓解**：采用专业 i18n 框架，组织文案字符串资源文件，方便翻译人员协作。优先支持中英双语，其他语言视社区贡献逐步补充。建立变更提示，当有新增或修改文案时，在GitHub issue提醒翻译进度，避免遗漏。对于未翻译内容临时回退显示英文并标记。
  6. **技术栈适应和集成风险** – *影响中, 概率低*：团队需掌握React前端和云函数开发，初期可能遇到集成部署问题（如CI/CD配置）。**缓解**：选择团队熟悉或社区支持好的技术；充分利用模板和现成方案（如React脚手架、Serverless框架）。搭建测试环境持续集成流水线，提前暴露集成问题。文档记录部署过程，确保“一键部署”目标实现。
  7. **开放源码治理风险** – *影响低, 概率中*：项目开源后可能有外部贡献和分支，需要管理PR和issues，或出现未经授权的部署实例。**缓解**：制定清晰的贡献指南和Code of Conduct。使用Apache/MIT等宽松许可允许他人复用，并在README注明官方维护部署仅此一份，其他部署概不负责用户数据。利用CI自动检查PR质量减轻维护负担。

- **最小验证计划（Spike）**
  - **目标与判定阈值**：验证核心技术路线的可行性，尤其是**课程数据获取与前端筛选性能**以及**通知触发及时性**。成功判定标准：在测试环境中，前端能在<0.5秒内完成对~1000门课程的数据筛选呈现；模拟的课程余量变化事件在60秒内触发通知邮件送达指定收件箱。
  - **步骤** (预计 3~5 天)：
    1. **数据抓取与样本构建**：编写脚本调用 Rutgers SOC API 获取一个学院（如计算机系）的课程列表 JSON 数据:contentReference[oaicite:35]{index=35}。保存为本地 JSON 文件，并记录其字段结构和典型数据量（估计上百门课程，包含sections及容量信息）。
    2. **前端过滤原型**：使用 HTML/JS 快速搭建页面，加载上述 JSON。在浏览器实现一个筛选函数（例如过滤出星期一有课程的列表）。计时测试筛选函数对1000条记录执行耗时。如有性能问题，优化数据结构或算法，确保单次简单筛选<50ms，多重条件筛选<200ms。
    3. **通知通路试验**：注册 SendGrid 免费账号，获取 API 密钥。编写一个简易 Python 脚本，读取步骤1中的课程列表，设定一个目标课程初始状态为Closed，然后模拟其状态变为Open（直接修改数据或准备一个OpenSections假数据）。脚本检测到状态变化后，调用 SendGrid API 向测试邮箱发送邮件。测量从状态改变到邮件收到的时间。如无实际Rutgers环境变动，可手动触发脚本逻辑模拟。
    4. **Discord机器人试验**（可选）：创建测试Discord服务器和Bot，获取token。扩展步骤3脚本，调用Discord API向自己账号发送消息，验证可行性。
    5. **结果记录与评估**：记录前端筛选平均耗时、邮件通知延迟。若前端筛选超过0.5秒，分析瓶颈（可能是DOM渲染，考虑采用虚拟列表或减少实时刷新范围）。若通知延迟>60秒，考虑加密直连SMTP或增大轮询频率等方案。Spike产出小结报告，并据此调整正式方案参数（如决定轮询间隔、前端技术选型等）。
  - **产出与验收**：代码仓库中将产生一个 `spike_test` 目录，包含课程数据样本、前端筛选演示页面、通知脚本等。验收标准：运行说明文档，使团队其他成员能在其本地环境重复实验并得到相似结果。确认满足阈值后，将Spike结论融入后续开发计划（如在任务中明确使用何种前端优化方案、通知频率等）。

- **评测与验收标准**
  - **功能正确性**：前端能展示指定学期**全量课程数据**，并按照用户选定的组合条件正确过滤列表（经测试，用不同字段组合检索，结果与手工预期一致）。对每个筛选条件编写测试用例集（例如筛选某教师应只出该教师课程等），要求通过率100%才算验收。
  - **性能指标**：页面首次加载时间 < **3秒**（在典型网络下加载所有必要静态资源和课程数据）；常用筛选操作响应时间 < **0.5秒**:contentReference[oaicite:36]{index=36}；支持至少 **200** 名同时在线用户无明显性能衰减（通过模拟并发或真实公开测试验证，静态架构预期满足）。通知延迟 < **30秒**（从课程状态变更到用户收到邮件/消息，采用实测平均值，峰值不超过60秒）。
  - **资源消耗**：前端数据文件大小控制在 **<5MB**（压缩后），以兼顾流量和解析性能；通知后端每日 API 调用次数控制在 **<10,000** 次（估算按100门课×每5分钟轮询×24h，实际可能更低），确保在免费额度内并留有余量。服务器/函数内存CPU使用符合限额要求，不出现超时或内存溢出。
  - **可靠性**：长时间运行监控稳定，无崩溃或严重错误。模拟连续运行1周，不漏报课程开放事件，不重复发送多余通知（每开课事件用户只收一次提醒）。发生网络或服务中断（如邮件服务暂时不可用）时系统能合理重试或记录，保证后续恢复时补发或者至少日志可查。
  - **兼容性和可用性**：支持主流浏览器（Chrome/Firefox/Safari/Edge当前版本）和移动端浏览器，界面布局在不同屏幕上无重大异常。通过手动及自动化UI测试，确保核心交互（筛选、日历选择、订阅操作）在各环境下均正常。多语言界面切换流畅，所有文本在中英文模式下完整展示（不出现乱码或文本溢出框的现象）。
  - **用户体验**：通过可用性测试量表评估（例如5-10名目标用户试用后问卷调查），达到 **满意度>90%**（非常满意和满意比例）。重点考察：筛选界面易懂、日历选择直观、通知设置简单明了。收集反馈清单，确保关键问题在最终发布前修正。
  - **可维护性**：代码通过Lint和单元测试，无严重质量缺陷。代码注释和文档完整，新的开发者能在 **<1天** 内成功部署并跑起本项目（验证文档步骤的准确性）。附带至少 **80%** 单元测试覆盖率和若干端到端测试用例，确保回归修改不引入明显bug。
  - **开放部署验证**：将项目仓库README中的“一键部署”指南在空环境下试行，要求在不直接求助作者的情况下，普通开发者能依据文档在 **<1小时** 内完成部署（包括获取API密钥配置、运行爬虫更新数据、启动前端和后台服务等），以检验开源易用性标准。

- **合规/隐私/安全要点**
  - **数据使用合规**：我们只使用 Rutgers 公开发布的课程信息:contentReference[oaicite:37]{index=37}。不涉及学生个人数据或内部系统。不触发选课行为（避免违反学校规定的自动选课禁令）。虽然属非官方工具，我们会在网站注明与Rutgers无官方关联，避免版权争议。课程数据归Rutgers所有，我们仅缓存展示，不作商业用途。
  - **用户隐私**：无注册登录流程，不收集姓名、学号等任何身份信息。用户仅在订阅通知时提交邮箱或Discord ID，用于单一用途通知。遵循最小化原则，后端不保存多余信息（如不保存通知历史，只保存当前关注列表）。提供随时退订机制，退订后即删除其联系记录。不会与第三方分享用户联系信息，符合GDPR“知情同意”和“被遗忘权”等要求。
  - **邮件合规**：群发邮件内容符合CAN-SPAM规范，包含项目名称和联系邮箱，提供清晰退订方式。仅在用户请求下发送，不进行任何营销推广。确保每封通知邮件主题和内容准确描述课程开放情况，不误导收件人。对于欧盟用户，如需，可在邮件内容中加入隐私声明链接。
  - **安全措施**：前端防范XSS与CSRF：所有用户输入筛选项不涉及脚本执行，但仍对特殊字符进行转义显示。后端云函数设置请求校验（如简单身份令牌或请求签名）防止被他人恶意调用滥发通知。API密钥（SendGrid、Discord token）绝不直接暴露在前端仓库，采用环境变量注入云函数。定期rotate密钥或使用更安全的Secrets存储服务。Discord机器人权限范围仅限发送消息，避免多余授权。
  - **内容安全**：课程数据有可能包含教师姓名等个人信息，但这些均为公开目录信息，使用上遵循教育用途范围。如未来扩展用户评论/笔记等功能，需要考虑内容审核机制，目前暂不涉及。接口日志中如记录邮箱地址，需妥善保护或定期清理，防止泄露。
  - **可解释性**：通知算法（轮询频率、判定逻辑）和筛选算法在技术上相对简单透明，可在文档中公开描述，接受用户监督。出于公平，我们不会对不同用户设定不同优先级，所有人机会均等。如有用户质疑错过通知，可通过日志追溯判断原因（例如显示课程何时开放何时通知）。整个系统逻辑力求简单清晰，减少黑箱行为提升信任度。

- **开发影响面**
  - **架构与模块**：需创建前端模块（React SPA，包括筛选表单组件、课程列表展示组件、周历选择组件、多语言切换组件等），后端模块（云函数或轻量服务器，用于接收订阅请求和执行定时轮询），数据更新模块（定期爬取Rutgers课程数据的脚本，可能集成在CI/CD中）。模块之间通过HTTP接口或共享存储衔接，例如订阅请求存储在Firestore或简单JSON文件，由轮询函数读取。
  - **接口契约**：前端—后端订阅接口需设计REST API（如 POST `/api/subscribe` 提交索引号和Email/Discord，DELETE `/api/unsubscribe` 退订）。通知函数与Rutgers API接口以及邮件/Discord API交互要符合各自协议格式。例如SendGrid用REST JSON请求发送邮件，Discord用HTTP POST发送消息。制定接口文档方便未来替换实现（如改用别的邮件服务）。
  - **数据存储与模型**：静态课程数据以JSON形式存放，结构需能高效被前端查询（考虑按学期->院系->课程嵌套，或平铺数组视前端过滤实现）。若数据量大可能拆分为多文件（例如每个院系一个JSON）动态加载，折中初始加载性能。通知订阅数据如果存云端，可用一个轻量数据库（如Firebase Firestore或AWS DynamoDB）键值存储索引号对应的订阅列表。数据模型简单（索引号->邮件地址列表 或 索引号->Discord用户列表）。
  - **部署与交付**：选择自动化部署管道。前端部分可配置GitHub Actions在push时自动构建并部署到 Pages或Netlify。数据抓取脚本也可通过Action定时（利用GitHub Actions的cron）更新数据仓库。如果后端采用云函数，则通过CI脚本发布函数更新。若用Docker容器统一部署，则写Dockerfile将前端静态服务器和后台轮询进程包含其中，供开源用户一键运行。无论哪种，需要在文档中详细列出部署步骤及所需配置（API密钥等）。
  - **监控与日志**：为提高可靠性，考虑添加监控。后端函数部分记录关键日志（如何时检测到某课程开放并发送通知到哪些用户）。这些日志可存储在云监控服务（如CloudWatch）或写入文件供调试。若可能，配置简单报警：如连续轮询失败则发送邮件告知维护者。前端部分可以接入简单的异常跟踪（如Sentry）以捕获用户侧错误，但需注意不收集敏感信息。
  - **CI/CD**：将设置代码质量检查（ESLint/Prettier等）和自动测试（unit和integration tests）流程，每次合并代码触发，确保稳定性。重要决策如更换依赖或架构调整应记录到项目决策记录（如ADR文件或 record.json 中 decisions）。定期更新依赖版本，关注Rutgers学期代码更新（每学期需获取新term参数，如2026春为1xxxxx代码）。
  - **维护计划**：由于课程数据每学期更新，需在学期开始前运行抓取脚本更新。可以将下一学期数据抓取列为定时任务。通知服务在非选课高峰期可暂停（例如学期中段不活跃时降低轮询频率以节省资源）。社区贡献者可以帮助添加其他校区或改进UI，我们应制定测试规范保障PR质量。

- **未决问题**
  - **Rutgers API 可用性边界**：目前推测 SOC API 可按科目获取全部课程:contentReference[oaicite:38]{index=38}。是否存在获取全部院系所有课程的接口（例如subject=ALL）尚不明确，需要进一步试验确认。如果必须按院系逐个抓取，可能有数百次请求，对抓取脚本效率和Rutgers服务器压力有影响。解锁条件：实际调用测试不同参数，或咨询Rutgers IT 文档（若能找到）。
  - **数据更新频率**：课程名等静态信息每学期基本不变，但容量变化频繁。我们计划静态数据每日更新1次，但 seat availability 通过 openSections 实时抓取。是否需要更频繁更新整个课程列表（例如处理新增课程或课表更改）尚存疑。可行方案是在选课高峰初期每天抓取，平时降低频率。需根据实际观察Rutgers课表变动频率调整。
  - **通知触发逻辑**：当课程有余量时只通知一次，还是每次空位出现都通知（如果反复满->空需要多次提醒）？目前倾向于每个订阅在首次开放时通知并自动取消订阅，避免反复打扰。但有可能学生想持续关注直到自己成功选上。这需要设计交互（例如通知后询问是否继续监控）。暂未决定，待与用户测试沟通后确定最优方案。
  - **Discord 通知实现细节**：使用Discord私信还是在群组频道统一广播？私信直接触达个人，但要求Bot和用户有共同服务器并开启DM；频道广播则需要用户自行查看频道信息。考虑到SwiftRU采用私信且用户须打开DM:contentReference[oaicite:39]{index=39}，我们的Bot可能也需要类似要求。需进一步调查Discord的API发送限制和接收规则，以选择可靠的通知方式。解锁条件：开发阶段创建Bot试验不同方式的可达率。
  - **UI 交互细节**：周历选择筛选逻辑需要明确：用户框选一段时间，是过滤出“所有上课时间完全在该范围内”的课程，还是“与该时间段不冲突”的课程（相当于选课空闲时间段)？当前设想为后者，即允许学生在空闲时段找可开的课，这与CSP的思路类似。这一逻辑较复杂（需排除有任何时间冲突的课程）。可能需要非即时的筛选(因为需比对每个section所有meeting times)。此功能的重要性很高但技术难度也最高，可能放到MVP后期或v2.0实现。暂定MVP只支持简单时间条件（比如筛选周几上课、开始时间早于X等），复杂空闲段匹配延后实现以保证如期交付。
  - **多校区与研究生课程**：目前聚焦本科、新布伦斯维克校区课程。Rutgers Newark/Camden及研究生课程数据亦可通过API获取（参数level=GR等）。未来或有需求支持全校区全学制。需要考虑架构扩展：例如数据文件按校区细分、界面增加校区/课程级别切换等。在MVP中也许只支持NB本科，其他作为增强计划。明确这一范围取舍有赖用户需求调研结果。
  - **未来功能**：如提供课表冲突检查（允许用户选多门课构建schedule避免冲突）、与日历集成（导出选课ICS）等增值功能在初版中scope如何？当前优先级低于核心筛选和通知功能，暂不纳入MVP。但在架构上留有接口空间，如课程对象保留时间信息结构便于后续做冲突检测算法。此部分将在MVP完成后根据时间和资源决定。

- **参考资料（Evidence Table）**

| 主张 / 结论                                    | 证据摘录                                                       | 来源标题                                             | 发布方        | 链接                                                         | 内容日期       | 访问日期      | 可信度    |
| ---------------------------------------------- | -------------------------------------------------------------- | ---------------------------------------------------- | ------------- | ------------------------------------------------------------ | -------------- | ----------- | -------- |
| Rutgers 官方提供了课程数据的JSON接口，但缺乏文档，需自行探索 | “There currently exists one API for accessing Rutgers… not easy to find, is undocumented, and provides only one endpoint.”:contentReference[oaicite:40]{index=40} | *Rutgers Course API (README)*                        | David Parsons (Rutgers CS) | 【4】https://github.com/anxious-engineer/Rutgers-Course-API (archive) | 2018 (推测)  | 2025-11-11 | 中 |
| 官方SOC API返回数据缺乏筛选功能，需自行查询过滤 | “The current SOC API does not allow for any querying and the data returned contains lots of empty fields… duplicates information.”:contentReference[oaicite:41]{index=41} | *Rutgers Course API (README)*                        | David Parsons (Rutgers CS) | 【4】https://github.com/anxious-engineer/Rutgers-Course-API | 2018 (推测)  | 2025-11-11 | 中 |
| SOC API 使用示例：通过URL参数获取指定学期院系课程列表 | “Link to current SOC API Endpoint… Spring 2018 Undergraduate CS Courses: `http://sis.rutgers.edu/oldsoc/courses.json?subject=198&semester=12018&campus=NB&level=UG`” :contentReference[oaicite:42]{index=42} | *Rutgers Course API (README)*                        | David Parsons (Rutgers CS) | 【4】https://github.com/anxious-engineer/Rutgers-Course-API | 2018 (推测)  | 2025-11-11 | 中 |
| Lightning 开源项目说明以Python轮询Rutgers SOC并用Mailgun发通知 | “Lightning is a course sniper for real time monitoring of Rutgers Schedule of Classes. Get lightning fast notifications via email when a course you need opens up. Built with Python, Requests, APScheduler, Mailgun...”:contentReference[oaicite:43]{index=43} | *Lightning (GitHub README)*                         | Anitej Biradar | 【9】https://github.com/anitejb/lightning#overview | 2020-12-03   | 2025-11-11 | 中 |
| Lightning 建议部署在云平台以实现24/7运行，提高性能稳定性 | “Lightning is designed to be running 24/7… consider deploying to a service like Heroku instead of locally.”:contentReference[oaicite:44]{index=44} | *Lightning (GitHub README)*                         | Anitej Biradar | 【9】https://github.com/anitejb/lightning#helpful-tips | 2020-12-03   | 2025-11-11 | 中 |
| SwiftRU Discord机器人号称课程开放通知速度 < 1 秒，明显快于其他工具 | “SwiftRU… notifications sent within ONE SECOND of an opening… SwiftRU: Within 1 second; TrackRU (discontinued): 5-10 seconds; SchedRU: 10-20 seconds”:contentReference[oaicite:45]{index=45} | *SwiftRU (Rutgers course sniper Discord bot)* (Reddit) | 开发者 hattvr | 【13】https://www.reddit.com/r/rutgers/comments/ug7hvc/swiftru_an_optimal_solution_for_course_sniping_at/ | 2022-05-01 | 2025-11-10 | 低 |
| Sniper 开源项目采用 Flask + SendGrid 实现邮件通知网页应用 | “Sniper… interfaces with Rutgers SOC and notifies users via email/text when a course opens up. It uses Flask, SQLAlchemy… Requests for SOC, SendGrid for email. Live version at sniper.rutgers.io.”:contentReference[oaicite:46]{index=46}:contentReference[oaicite:47]{index=47} | *Sniper (GitHub README)*                             | Rui Zhang 等   | 【15】https://github.com/v/sniper (archived README) | 2017-07-15 (估) | 2025-11-11 | 中 |
| QuACS 采用纯静态前端架构，所有课程筛选逻辑在浏览器完成，确保性能与可扩展性 | “Course Scheduling… done in the user's browser. QuACS will always be a simple static website on GitHub pages.”:contentReference[oaicite:48]{index=48} | *QuACS – Questionably Accurate Course Scheduler (README)* | RCOS (RPI OSS) | 【21】https://github.com/quacs/quacs#quacs-philosophy | 2021-08-15   | 2025-11-11 | 中 |
| 静态网站托管和扩展成本远低于动态网站，易于部署在免费平台 | “Static websites… hosted on less expensive platforms, such as Netlify or GitHub Pages. Dynamic websites require stronger hosting… more expensive monthly.”:contentReference[oaicite:49]{index=49} | *How Much Does a Static and Dynamic Website Cost?*   | Dev.to 博文    | 【25】https://dev.to/alenajames/how-much-does-a-static-and-dynamic-website-cost-3lk4 | 2023-08-01   | 2025-11-11 | 中 |
| 国际化(i18n)可扩大用户覆盖面，提升用户本地化体验 | “Localization… entails adapting content for users in different languages. It’s about creating an experience that makes users feel at home… global platforms like Amazon make language switching seamless.”:contentReference[oaicite:50]{index=50} | *How to Build Multilingual Apps with i18n in React*  | freeCodeCamp   | 【26】https://www.freecodecamp.org/news/build-multilingual-apps-with-i18n-in-react/ | 2024-12-04   | 2025-11-11 | 中 |

