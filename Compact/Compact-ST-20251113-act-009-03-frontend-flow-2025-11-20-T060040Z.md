## 已落实事实
- 课程卡片新增 `SubscribeButton` 面板：带班次快捷选择（open/waitlist/closed 标签）、Index 输入、邮箱/Discord 免登录输入、退订 token 栏位，内置加载防抖、traceId 反馈、重复订阅提示与 session 内联系人缓存（localStorage）。
- 前端 API 客户端扩展 `apiPost` 及 `/api/subscribe` / `/api/unsubscribe` 封装，i18n 文案覆盖英文/中文，课程列表虚拟行高度上调以容纳订阅表单。
- 课程 section 预览转换去除了空 meeting 条目，FilterPanel 对动态 i18n key 做了类型降级以维持编译通过。

## 自测 / 验证
- `cd frontend && npm run build`。
- SQLite 本地链路验证：`npm run db:migrate` 后用 `node.exe` 将 term=2024FA、campus=NB、subject=198、course 01:198:111、section 12345 插入种子，再用临时 tsx 脚本调用 Fastify `app.inject`：
  - `POST /api/subscribe` → 201，subscriptionId=1，unsubscribeToken 返回。
  - 随后 `POST /api/unsubscribe`（沿用 token+contact）→ 200，previousStatus=pending。

## 操作提示
- 打开课程列表后，卡片底部的 “Vacancy alerts/空位提醒订阅” 可直接选择班次、输入邮箱或 Discord ID 并提交；退订可粘贴 token 或复用当前会话的订阅 ID，状态和 traceId 会即时展示。
