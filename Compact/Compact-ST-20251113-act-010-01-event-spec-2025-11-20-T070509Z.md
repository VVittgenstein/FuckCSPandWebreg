## Subtask ST-20251113-act-010-01-event-spec

### Scope
- Documented openSections polling output and notification event contract; aligned cadence/backoff with prior SOC rate-limit findings.

### Confirmed facts (implemented in docs)
- New spec at `docs/open_event_spec.md` defines canonical `open_event` shape (section/term/campus/index, status_before/after, seat_delta, event_at, detected_by, snapshot_id, dedupe_key with 5m bucket, trace_id, payload) plus linking table `open_event_notifications` (per-sub fanout_status, attempts, locks, errors).
- Polling cadence: round-robin term/campus every 45–75s (jitter), up to 10 workers with 250 ms gaps (~30 req/s observed); backoff on first non-2xx to 15s pause then 5 workers/500 ms until 5 clean responses.
- Lifecycle: detect Closed/Wait→Open from openSections/snapshots + section_status_events; emit deduped events; build fan-out rows joined to active/pending subscriptions honoring quiet hours/maxNotifications/snooze; send with retry (max 3), updating subscription last_known_section_status + subscription_events; record Closed housekeeping after ≥2 missed polls/3m; expire events after 30d.
- Oscillation handling: only one notification per dedupe window; reopen after a Closed snapshot triggers new dedupe_key; campus-wide empty payload treated as soft outage (no closes, 30s pause).
- Updated `record.json` to mark this subtask status=done and refreshed parent task `updated_at`.

### Interfaces / behavior impact
- Establishes event storage contract (`open_events`, `open_event_notifications`) and dedupe_key format for downstream workers/channel senders.
- Sets expected polling/backoff profile other modules should adhere to when implementing poller/fanout.

### Tests / validation
- Doc-only change; no automated tests executed.

### Risks / TODO
- Schema changes implied (`open_events`, `open_event_notifications`) not yet implemented in code/DB; downstream workers must align with this spec.
- Actual poller/sender logic still pending; dedupe and oscillation rules rely on future implementation accuracy.
